{{/*
  èˆ‡å®˜æ–¹å…§å»ºçš„figureä¸åŒä¹‹è™•æ˜¯ï¼Œé€™å€‹ç‰ˆæœ¬ç”¨çš„æ˜¯absURLï¼Œè€Œå®˜æ–¹çš„åœ–ç‰‡ä½å­é è¨­æ˜¯å’Œmarkdownæ–‡ä»¶ç›¸åŒç›®éŒ„ç•¶ä½œé–‹å§‹
  {{< figure src="../../images/tab_icon.jpg" title="ç¥æ°£çš„åª½åª½ç†Š" >}}

  USAGE:

    {{< insert-figure "images/issues_position.png" >}}

    {{< insert-figure "images/issues_position.png" "titleName" >}}  // static/images/issues_position.png

  {{< insert-figure "images/issues_position.png" "titleName" "60%" "40%">}}  // width:60% height:40%

    {{< insert-figure src="images/issues_position.png" title="titleName" >}}
*/}}

{{ $src := "" }}
{{ $title := "" }}
{{ $width := "" }}
{{ $height := "" }}
{{ $from := "" }}
{{ if .IsNamedParams }}
  {{ $src = default "" (.Get "src" ) }}
  {{ $title = default "" (.Get "title") }}
  {{ $width = default "" (.Get "w") }}
  {{ $height = default "" (.Get "h") }}
  {{ $from = default "" (.Get "from") }}
{{ else }}
  {{ $src = default "" (.Get 0 ) }}
  {{ $title = default "" (.Get 1) }}
  {{ $width = default "" (.Get 2) }}
  {{ $height = default "" (.Get 3) }}
  {{ $from = default "" (.Get 4) }}
{{ end }}

<figure>
  {{ if or $width $height }}
    {{ $style := printf `style="%s%s"` (cond (gt (len $width) 0) (printf `width:%s;` $width ) "") (cond (gt (len $height) 0) (printf `height:%s;` $height ) "") }}
    <img src="{{ $src | absURL}}" {{ $style | safeHTMLAttr }}/>
  {{ else }}
    <img src="{{ $src | absURL}}" />
  {{ end }}

  {{ if $title }}
    <figcaption>
        <h4>{{- $title -}}</h4>
    </figcaption>
  {{ end }}

  {{ with $from }}
    <small style="font-size:0.4em;"><a href="{{ . | safeHTMLAttr }}">ğŸ‘†{{ T "sourceFrom" }}</a></small>
  {{ end }}
</figure>
